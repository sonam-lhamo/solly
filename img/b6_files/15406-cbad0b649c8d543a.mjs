(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[15406],{618674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},889464:(e,t,s)=>{var a=s(618674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},607187:(e,t,s)=>{var a=s(889464),r=s(479833),n=/[&<>"']/g,o=RegExp(n.source);e.exports=function(e){return(e=r(e))&&o.test(e)?e.replace(n,a):e}},768559:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(826067);const r=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,n=/\/discover\/article\/[\w-]+\/(\d+)/,o=(e,t)=>t?e.substring(t.length).split("/")[0]:e,c=({boardUrl:e,callToCreateSourcePinId:t,path:s,pinId:c,pinnerUserName:i,query:u,search:d,storyPinDataId:l})=>{var p,_;if(!s)return"";let E="";switch(s){case"/":case"/homefeed/":return"UserHomefeedResource";case i&&`/${i}/pins/`:return"UserPinsResource";case i&&`/${i}/`:case/\/_activity\//.test(s)&&s:return"UserActivityPinsResource";case/\/_created\//.test(s)&&s:return l?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(s)&&s:return"UserDiscoveredPinsResource";case/\/_shop\//.test(s)&&s:return"StoreFrontFeedResource";case/\/_saved\//.test(s)&&s:return"BoardlessPinsResource";case i&&`/${i}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(s)&&s:return"VisualLiveSearchResource";case/\/pin\//.test(s)&&s:E="/pin/";const y=o(s,E);if(c!==y)return t?`ApiResource_callToCreatePins_${y}`:`RelatedPinFeedResource_${y}`;break;case/\/search\//.test(s)&&s:if(d){return`SearchResource_${((0,a.mB)(d,{shouldDecode:!1}).q||"").toLowerCase()}`}if(u)return`SearchResource_${encodeURIComponent(u.q||"").toLowerCase()}`;break;case n.test(s)&&s:return`ExploreArticleResource_${(null===(p=s.match(n))||void 0===p?void 0:p[2])||"unknown"}`;case/\/discover\/article\//.test(s)&&s:E="/discover/article/";return`ExploreArticleResource_${o(s,E)}`;case/\/categories\//.test(s)&&s:E="/categories/";return`CategoryFeedResource_${o(s,E)}`;case/\/discover\/topics\//.test(s)&&s:return"CategoryFeedResource";case/\/news_hub\//.test(s)&&s:E="/news_hub/";return`NewsHubDetailsResource_${o(s,E)}`;case/\/_tools\/more-ideas\//.test(s)&&s:return"BoardContentRecommendationResource";case/\/topics\//.test(s)&&s:E="/topics/";return`TopicFeedResource_${o(s,E)}`;case i&&`/${i}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(s)&&s:E="/source/";return`DomainFeedResource_${o(s,E)}`;case/\/explore\//.test(s)&&s:E="/explore/";return`SearchResource_${o(s,E)}`;case e:case!!e&&/\/more_ideas\//.test(s)&&s:return"BoardFeedResource";case e&&s.indexOf(e)>-1&&s:return"BoardSectionPinsResource";case/\/following\//.test(s)&&s:return"FollowingFeedResource";case/\/brand_catalog\//.test(s)&&s:return"BrandCatalogFeedResource";case r.test(s)&&s:return`TodayArticleFeedResource_${(null===(_=s.match(r))||void 0===_?void 0:_[2])||"unknown"}`;case/\/today\//.test(s):return"TodayTabResource";case/\story_feed\//.test(s)&&s:if(d){const{feed_type:e,request_params:t}=(0,a.mB)(d);return`StoryFeedResource_${e}_${t}`}break;case/\/your-shop\//.test(s)&&s:return"PersonalBoutiqueResource"}return""},i=({boardUrl:e,callToCreateSourcePinId:t,location:s,pinId:a,pinnerUserName:r,previousHistory:n,storyPinDataId:o,trackingParams:i,trackingParamsMap:u={}})=>{if(!a||!i||!s)return;if(!u)return`${i}~0`;const{pathname:d,search:l,query:p}=s,_=c({boardUrl:e,callToCreateSourcePinId:t,path:d,pinId:a,pinnerUserName:r,query:p,search:l,storyPinDataId:o,trackingParams:i,trackingParamsMap:u}),E=Object.keys(u);let y;if((d||"").startsWith("/pin/")){const e=E.find((e=>"PinResource"!==e));y=e?u[e]:u.PinResource}else y=u[_];let w;if(!y&&n&&n.length){const s=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(n[n.length-1].location);w=c({boardUrl:e,callToCreateSourcePinId:t,path:s,pinId:a,pinnerUserName:r,query:p,search:l,storyPinDataId:o,trackingParams:i,trackingParamsMap:u}),y=u[w]}return y||(y=`${i||""}~0`),y}},124237:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(607187),r=s.n(a);const n={};n._showErrorCallback=n._showErrorCallback||null,n.setShowHtmlErrorCallback=function(e){n._showErrorCallback=e},n.showError=function(e,t,s){const a=r()(e);return n.showHtmlError(a,t,s)},n.showHtmlError=function(e,t,s){"function"==typeof n._showErrorCallback&&n._showErrorCallback(e,t,s)};const o=n},784641:(e,t,s)=>{s.d(t,{E5:()=>u,T7:()=>a,Y_:()=>d,Yj:()=>o,d9:()=>p,nx:()=>l,pe:()=>c,xt:()=>i});s(883119);function a(e,t,s,a){const r=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),n=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\â€™'"]/g,"").trim().replace(/\s+/g,"-")}(s);return`/today/${r}/${encodeURIComponent(n)}/${a}/`}const r={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},n={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},o=(e,t)=>{const s=n[e];return!(null===s||s!==t&&!t.startsWith(s))},c=e=>r[e],i=(e,t,s)=>e||(t||s||""),u=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),d=e=>"todayarticle"===e.type,l=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),p=e=>{var t,s;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(s=e.width)&&void 0!==s?s:1)}},215292:(e,t,s)=>{s.d(t,{Z:()=>o,q:()=>n});var a=s(667294);const r=()=>{const[e,t]=(0,a.useState)(!1),[s,r]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1);return{active:e,focused:s,hovered:n,onBlur:()=>{r(!1),t(!1)},onFocus:()=>r(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>o(!0),onMouseLeave:()=>{o(!1),t(!1)},onMouseUp:()=>t(!1)}};function n({children:e}){return e(r())}const o=r},479301:(e,t,s)=>{s.d(t,{i5:()=>v,sX:()=>h,aX:()=>R,Z5:()=>m,NG:()=>S,MT:()=>f,iu:()=>N});var a=s(667294),r=s(6637),n=s(802201),o=s(682492),c=s.n(o);const i=(e,t)=>e.data[t]&&e.data[t].messages||[];function u(e,t){const s={};return e.filter((e=>!!e)).reduce(((e,a)=>{const r=t(a);return s[r]?(c()(s[r],a),e):(s[r]=a,e.concat([a]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function l(e,t,s){let a=i(e,t).concat(s);return a=u(a,(e=>e.id)),d(a)}const p={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function _(e=p,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:s}=t.payload;return{...e,data:{...e.data,[s]:{...e.data[s]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const s={...e,data:{...e.data}},{id:a}=t.payload;return delete s.data[a],s}if("FETCH_COMPLETE"===t.type){const{options:s,resource:a,response:r}=t.payload,n=r.resource_response.data;if("ConversationMessagesResource"===a){const t=n||[],a=(null==s?void 0:s.conversation_id)||"",r=l(e,a,t),o=r[r.length-1];return{...e,data:{...e.data,[a]:{...e.data[a],id:a,messages:r,unread:0,last_message:o}}}}if("ConversationsResource"===a){const t=n||[],s={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:a,name:r,board:n,emails:o,unread:c,users:i,last_message:u}=e,d=l(s,t,[u]);s.data[t]={...s.data[t],id:t,created_at:a,name:r,board:n,emails:o||[],unread:c||0,users:i||[],last_message:u,messages:d}})),s}if("ConversationResource"===a){const t=n||{},{id:s}=t,a={...e,data:{...e.data}};return s&&(a.data[s]={...a.data[s],...t}),a}if("NewsHubBadgeResource"===a){if(n){const t=n.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:s,message:a}=t.payload;return e.data[s]?{...e,data:{...e.data,[s]:{...e.data[s],id:s,messages:[...e.data[s].messages,a]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){const{id:s,tempMessage:a,newMessage:r}=t.payload;if(e.data[s]){if(i(e,s).find((e=>e.id===a.id&&e.created_ms===a.created_ms))){let t=i(e,s).filter((e=>e.id!==a.id)).concat([r]);return t=u(t,(e=>e.id)),t=d(t),{...e,data:{...e.data,[s]:{...e.data[s],last_message:r,messages:t}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===t.type){const{id:s,tempMessageId:a}=t.payload;if(e.data[s]){const t=i(e,s).filter((e=>e.id!==a));return{...e,data:{...e.data,[s]:{...e.data[s],messages:t}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:s}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:s}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload};if("CLEAR_MESSAGE_BADGE"===t.type){const{id:s}=t.payload;return{...e,data:{...e.data,[s]:{...e.data[s],unread:0}}}}}return e}var E=s(425288),y=s(505920),w=s(785893);const C=(()=>{let e=0;return()=>e++})(),{Provider:g,useHook:m}=(0,E.Z)("Conversations");function v({children:e}){const[t,s]=(0,a.useReducer)(_,p),n=(0,a.useCallback)((e=>s({type:"FETCH_COMPLETE",payload:e})),[]);(0,y.Z8)("ConversationMessagesResource",n),(0,y.my)("ConversationMessagesResource",n),(0,y.Z8)("ConversationsResource",n),(0,y.Z8)("ConversationResource",n),(0,y.Z8)("NewsHubBadgeResource",n);const o=(0,a.useCallback)(((e,t=!1,a="")=>s({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:a}})),[]),c=(0,a.useCallback)(((e,t="",a=!1)=>s({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:a}})),[]),i=(0,a.useCallback)((e=>s({type:"CONVERSATION_CREATE",payload:e})),[]),u=(0,a.useCallback)((e=>s({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),d=(0,a.useCallback)(((e,t,a)=>{r.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;s({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";a(t)}))}),[]),l=(0,a.useCallback)((()=>{s({type:"CLOSE_DROPDOWN"})}),[]),E=(0,a.useCallback)((()=>{s({type:"OPEN_DROPDOWN"})}),[]),C=(0,a.useCallback)((e=>{s({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),m=(0,a.useCallback)(((e,t)=>s({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),v=(0,a.useCallback)(((e,t,a)=>s({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:a}})),[]),R=(0,a.useCallback)(((e,t)=>s({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}})),[]),S=(0,a.useCallback)((e=>s({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),h=(0,a.useCallback)((e=>s({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),f=(0,a.useCallback)((e=>s({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}})),[]),N=(0,a.useMemo)((()=>({clearMessageBadge:f,conversationOpen:o,conversationClose:c,conversationCreate:i,conversationDelete:u,conversationGet:d,dropdownClose:l,dropdownOpen:E,newMessageOpen:C,pendingMessageSend:m,pendingMessageSuccess:v,pendingMessageFailure:R,updateNewsHubCount:S,updateUnreadCount:h,conversations:t})),[f,o,c,i,u,d,l,E,C,m,v,R,S,h,t]);return(0,w.jsx)(g,{value:N,children:e})}function R(){const{conversationCreate:e}=m();return async t=>{let s;const a=r.Z.create("ConversationsResource",t);try{var n;const t=null===(n=(await a.callCreate()).resource_response)||void 0===n?void 0:n.data;t&&(e(t),s=t)}catch(o){throw new Error(o.message)}return s}}function S(){const{conversations:e,conversationCreate:t,pendingMessageSend:s,pendingMessageSuccess:a,pendingMessageFailure:o}=m(),c=(0,n.AF)();return async(n,i,u,d)=>{const{text:l,pinId:p,boardId:_,userId:E,didItId:y}=i;async function w(){const e=r.Z.create("ConversationMessagesResource",{conversation_id:n,text:l,pin:p,board:_,user:E,user_did_it_data:y,source:u}),t=`${C()}`,i={text:l,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,pin:p?c[p]:null,type:"tempMessage"};s(n,i);try{var w;const t=null===(w=(await e.callCreate()).resource_response)||void 0===w?void 0:w.data;t&&a(n,i,t)}catch(g){throw o(n,t),new Error(g.message)}}if(e.data[n])await w();else{const e=r.Z.create("ConversationResource",{conversation_id:n});try{var g;const s=null===(g=(await e.callGet()).resource_response)||void 0===g?void 0:g.data;s&&(t(s),await w())}catch(m){throw new Error(m.message)}}}}function h(e){const{conversations:t}=m();return t.data[e]}function f(e){const{conversations:t}=m();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}function N(){const{conversations:{data:e}}=m(),t=(s=e,Object.keys(s).map((e=>s[e]))).filter((e=>e.users&&e.last_message));var s,a;return a=t,Array.from(a).sort(((e,t)=>new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)))}},480622:(e,t,s)=>{s.d(t,{C:()=>i,f:()=>c});var a=s(667294),r=s(425288),n=s(785893);const{Provider:o,useHook:c}=(0,r.Z)("MostRecentPin");function i({children:e}){const[t,s]=(0,a.useState)(),[r,c]=(0,a.useState)(),i=(0,a.useCallback)((e=>{const t=r?r.slice(0,10):[],s=[e].concat(t.filter((t=>t!==e)));c(s)}),[r]),u=(0,a.useMemo)((()=>({id:t,plpImageSignatures:r,setMostRecentPinId:s,setMostRecentPinImage:i})),[t,r,i]);return(0,n.jsx)(o,{value:u,children:e})}},711108:(e,t,s)=>{s.d(t,{l:()=>d,E:()=>u});var a=s(667294),r=s(425288);function n(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:r}=t;if("ShareSuggestionsResource"===r.resource){var s;const a=t.payload.response.resource_response.data||[],{term:n=""}=null!==(s=r.options)&&void 0!==s?s:{};return{...e,[n]:a}}if("ShareSuggestionsTypeaheadResource"===r.resource){var a;const s=(t.payload.response.resource_response.data||{}).items||[],{term:n=""}=null!==(a=r.options)&&void 0!==a?a:{};return{...e,[n]:s}}}return e}var o=s(505920),c=s(785893);const{Provider:i,useHook:u}=(0,r.Z)("ShareSuggestions");function d({children:e}){const[t,s]=(0,a.useReducer)(n,{}),r=e=>{s({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,o.Z8)("ShareSuggestionsResource",r),(0,o.Z8)("ShareSuggestionsTypeaheadResource",r);const u=(0,a.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,c.jsx)(i,{value:u,children:e})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/15406-cbad0b649c8d543a.mjs.map